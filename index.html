<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Hiragana ‚Üî Romaji Quiz (50
  Questions)</title>

<style>
body{
  font-family:"Hiragino Kaku Gothic Pro","Meiryo",sans-serif;
  background:#fff;
  display:flex;
  flex-direction:column;
  align-items:center;
  padding:40px;
}
h1{color:#b23b3b;}
#quiz-container{
  background:#fff;
  border-radius:15px;
  box-shadow:0 4px 12px rgba(0,0,0,.15);
  padding:30px;
  width:90%;
  max-width:600px;
  text-align:center;
}
.question{font-size:3em;margin-bottom:20px;}
.option{
  display:block;
  background:#ffeaea;
  border:none;
  border-radius:10px;
  padding:12px;
  font-size:1.2em;
  width:100%;
  max-width:300px;
  margin:10px auto;
  cursor:pointer;
}
.option:hover{background:#f7b6b6;}
#next{
  display:none;
  margin-top:20px;
  background:#b23b3b;
  color:#fff;
  border:none;
  border-radius:10px;
  padding:10px 20px;
  cursor:pointer;
}
</style>
</head>

<body>
<h1>Hiragana ‚Üî Romaji Quiz</h1>

<div id="quiz-container">
  <div id="q-num"></div>
  <div class="question" id="question"></div>
  <div id="options"></div>
  <div id="message"></div>
  <div id="motivation" style="font-size:1.2em; margin-top:10px;"></div>
  <div id="gif-box" style="margin-top:15px"></div>
  <button id="next">Next</button>
</div>

<script>
/* ---------- Base kana ---------- */
const baseQuestions = [
  {h:"„Å™",r:"na"},{h:"„Å´",r:"ni"},{h:"„Å¨",r:"nu"},{h:"„Å≠",r:"ne"},{h:"„ÅÆ",r:"no"},
  {h:"„Åæ",r:"ma"},{h:"„Åø",r:"mi"},{h:"„ÇÄ",r:"mu"},{h:"„ÇÅ",r:"me"},{h:"„ÇÇ",r:"mo"},
  {h:"„ÅØ",r:"ha"},{h:"„Å≤",r:"hi"},{h:"„Åµ",r:"fu"},{h:"„Å∏",r:"he"},{h:"„Åª",r:"ho"},
  {h:"„Å∞",r:"ba"},{h:"„Å≥",r:"bi"},{h:"„Å∂",r:"bu"},{h:"„Åπ",r:"be"},{h:"„Åº",r:"bo"},
  {h:"„Å±",r:"pa"},{h:"„Å¥",r:"pi"},{h:"„Å∑",r:"pu"},{h:"„Å∫",r:"pe"},{h:"„ÅΩ",r:"po"},
  {h:"„ÇÑ",r:"ya"},{h:"„ÇÜ",r:"yu"},{h:"„Çà",r:"yo"},
  {h:"„Çâ",r:"ra"},{h:"„Çä",r:"ri"},{h:"„Çã",r:"ru"},{h:"„Çå",r:"re"},{h:"„Çç",r:"ro"},
  {h:"„Çì",r:"n"}, {h:"„Çè",r:"wa"},{h:"„Çí",r:"wo"}
];

/* ---------- Y≈çon (small „ÇÉ„ÇÖ„Çá) ---------- */
const yoon = [
  {h:"„Å°„ÇÉ",r:"chya"},{h:"„Å°„ÇÖ",r:"chyu"},{h:"„Å°„Çá",r:"chyo"},
  {h:"„Åó„ÇÉ",r:"shya"},{h:"„Åó„ÇÖ",r:"shyu"},{h:"„Åó„Çá",r:"shyo"},
  {h:"„Å´„ÇÉ",r:"nya"},{h:"„Å´„ÇÖ",r:"nyu"},{h:"„Å´„Çá",r:"nyo"},
  {h:"„Åø„ÇÉ",r:"mya"},{h:"„Åø„ÇÖ",r:"myu"},{h:"„Åø„Çá",r:"myo"},
  {h:"„Åò„ÇÉ",r:"ja"},{h:"„Åò„ÇÖ",r:"ju"},{h:"„Åò„Çá",r:"jo"},
  {h:"„Å≤„ÇÉ",r:"hya"},{h:"„Å≤„ÇÖ",r:"hyu"},{h:"„Å≤„Çá",r:"hyo"},
  {h:"„Å≥„ÇÉ",r:"bya"},{h:"„Å≥„ÇÖ",r:"byu"},{h:"„Å≥„Çá",r:"byo"},
  {h:"„Å¥„ÇÉ",r:"pya"},{h:"„Å¥„ÇÖ",r:"pyu"},{h:"„Å¥„Çá",r:"pyo"}
];

/* ---------- Big-kana counterparts ---------- */
const bigKana = [
  {h:"„Åó„ÇÑ",r:"shiya"},{h:"„Åó„ÇÜ",r:"shiyu"},{h:"„Åó„Çà",r:"shiyo"},
  {h:"„Å°„ÇÑ",r:"chiya"},{h:"„Å°„ÇÜ",r:"chiyu"},{h:"„Å°„Çà",r:"chiyo"},
  {h:"„Å´„ÇÑ",r:"niya"},{h:"„Å´„ÇÜ",r:"niyu"},{h:"„Å´„Çà",r:"niyo"},
  {h:"„Åø„ÇÑ",r:"miya"},{h:"„Åø„ÇÜ",r:"miyu"},{h:"„Åø„Çà",r:"miyo"},
  {h:"„Å≤„ÇÑ",r:"hiya"},{h:"„Å≤„ÇÜ",r:"hiyu"},{h:"„Å≤„Çà",r:"hiyo"},
  {h:"„Å≥„ÇÑ",r:"biya"},{h:"„Å≥„ÇÜ",r:"biyu"},{h:"„Å≥„Çà",r:"biyo"},
  {h:"„Å¥„ÇÑ",r:"piya"},{h:"„Å¥„ÇÜ",r:"piyu"},{h:"„Å¥„Çà",r:"piyo"}
];

const all = [...baseQuestions, ...yoon, ...bigKana];

/* ---------- Helpers ---------- */
const shuffle = a => a.slice().sort(()=>Math.random()-0.5);
const pick = a => a[Math.floor(Math.random()*a.length)];

/* ---------- Build quiz ---------- */
/* ---------- Build quiz (balanced, no deletions) ---------- */
let questions = [];

// Shuffle all available kana
let pool = shuffle(all);

// Repeat pool until we have at least 50 questions
while (questions.length < 50) {
  pool.forEach(q => {
    if (questions.length < 50) {
      questions.push({
        ...q,
        dir: Math.random() < 0.5 ? "toRomaji" : "toHiragana"
      });
    }
  });
}

// Final shuffle to mix everything
questions = shuffle(questions);


/* ---------- State ---------- */
let i=0, score=0;

/* ---------- DOM ---------- */
const qEl = document.getElementById("question");
const oEl = document.getElementById("options");
const mEl = document.getElementById("message");
const motivationEl = document.getElementById("motivation");
const gifBox = document.getElementById("gif-box");
const nEl = document.getElementById("next");
const numEl = document.getElementById("q-num");

/* ---------- Logic ---------- */
function show(){
  oEl.innerHTML="";
  mEl.textContent="";
  motivationEl.textContent="";
  gifBox.innerHTML="";
  nEl.style.display="none";

  const q = questions[i];
  numEl.textContent = `Question ${i+1} / 50`;

  let correct, pool;
  if(q.dir==="toRomaji"){
    qEl.textContent = q.h;
    correct = q.r;
    pool = all.map(x=>x.r);
  }else{
    qEl.textContent = q.r;
    correct = q.h;
    pool = all.map(x=>x.h);
  }

  shuffle([correct, ...shuffle(pool.filter(x=>x!==correct)).slice(0,3)])
    .forEach(opt=>{
      const b = document.createElement("button");
      b.className = "option";
      b.textContent = opt;
      b.onclick = ()=>check(opt,correct);
      oEl.appendChild(b);
    });
}

function check(choice, correct){
  document.querySelectorAll(".option").forEach(b=>b.disabled=true);
  if(choice===correct){
    score++;
    mEl.textContent="‚úÖ Correct!";
  }else{
    mEl.textContent=`‚ùå ${correct}`;
  }
  nEl.style.display="inline-block";
}

nEl.onclick = ()=>{
  i++;
  i < questions.length ? show() : finishGame();
};

function finishGame(){
  qEl.textContent="üéâ Finished!";
  numEl.textContent="";
  oEl.innerHTML="";
  nEl.style.display="none";

  let text="", gif="";
  if(score >= 21){
    text="üåü Excellent! You‚Äôre true kana master!";
    gif="https://raw.githubusercontent.com/k58835032-notbot/lesson-9-morae/main/cool%20cute%20cat.gif";
  }else if(score >= 12){
    text="üëç Good job! Keep practicing!";
    gif="https://raw.githubusercontent.com/k58835032-notbot/lesson-9-morae/main/cute%20cat%20walking.gif";
  }else{
    text="üå± Don‚Äôt worry ‚Äî practice makes perfect!";
    gif="https://raw.githubusercontent.com/k58835032-notbot/lesson-9-morae/main/sad%20cute%20cat.gif";
  }

  mEl.textContent = `Score: ${score} / 50`;
  motivationEl.textContent = text;
  gifBox.innerHTML = `<img src="${gif}" style="max-width:200px;">`;
}

show();
</script>
</body>
</html>
